<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webserv ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, 
                rgba(154, 255, 154, 0.15), 
                rgba(204, 255, 204, 0.2), 
                rgba(178, 255, 178, 0.12));
            min-height: 100vh;
            color: #2d5a2d;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(144, 238, 144, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 70%, rgba(178, 255, 178, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.25), 
                rgba(255, 255, 255, 0.15));
            padding: 30px;
            border-radius: 20px;
            box-shadow: 
                0 8px 32px rgba(105, 190, 105, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(144, 238, 144, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                transparent 50%, 
                rgba(144, 238, 144, 0.05) 100%);
            border-radius: 20px;
            pointer-events: none;
        }
        
        /* ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ */
        @media (max-width: 768px) {
            .container {
                margin: 0 10px;
                padding: 20px;
            }
            body {
                padding: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                margin: 0 5px;
                padding: 15px;
            }
            body {
                padding: 5px;
            }
        }
        h1 {
            color: #2d5a2d;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(105, 190, 105, 0.2);
        }
        h2 {
            color: #4a7c4a;
            margin-top: 30px;
        }
        .info-box {
            background: linear-gradient(135deg, rgba(178, 255, 178, 0.2), rgba(204, 255, 204, 0.25));
            border-left: 4px solid rgba(105, 190, 105, 0.8);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            backdrop-filter: blur(5px);
        }
        .success-message {
            background: linear-gradient(135deg, rgba(144, 238, 144, 0.3), rgba(178, 255, 178, 0.35));
            color: #2d5a2d;
            padding: 12px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
            border: 1px solid rgba(105, 190, 105, 0.3);
            backdrop-filter: blur(5px);
        }
        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.9em;
            color: #777;
        }
        .tab-navigation {
            display: flex;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.3), 
                rgba(204, 255, 204, 0.15));
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
            border-radius: 15px 15px 0 0;
            backdrop-filter: blur(15px);
            flex-wrap: wrap;
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                0 2px 10px rgba(105, 190, 105, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-bottom: none;
        }
        .tab-button {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1), 
                rgba(255, 255, 255, 0.05));
            border: none;
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            color: #4a7c4a;
            flex: 1;
            min-width: 0;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            position: relative;
        }
        .tab-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.2) 0%, 
                transparent 50%, 
                rgba(144, 238, 144, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .tab-button:hover {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.2), 
                rgba(144, 238, 144, 0.15));
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        .tab-button:hover::before {
            opacity: 1;
        }
        .tab-button.active {
            color: #2d5a2d;
            border-bottom-color: rgba(105, 190, 105, 0.8);
            font-weight: bold;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.3), 
                rgba(178, 255, 178, 0.2));
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 0 rgba(105, 190, 105, 0.2);
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ */
        @media (max-width: 768px) {
            .tab-button {
                font-size: 14px;
                padding: 10px 8px;
            }
        }
        
        @media (max-width: 480px) {
            .tab-navigation {
                flex-direction: column;
            }
            .tab-button {
                flex: none;
                width: 100%;
                font-size: 16px;
                padding: 12px 16px;
                border-bottom: none;
                border-left: 3px solid transparent;
            }
            .tab-button.active {
                border-bottom: none;
                border-left-color: rgba(105, 190, 105, 0.8);
            }
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .test-links {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.2), 
                rgba(204, 255, 204, 0.1));
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            backdrop-filter: blur(15px);
            box-shadow: 
                0 4px 20px rgba(105, 190, 105, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(144, 238, 144, 0.1);
        }
        .test-links h3 {
            color: #4a7c4a;
            margin-top: 0;
        }
        .test-links a {
            color: #2d5a2d;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .test-links a:hover {
            color: #1a4a1a;
            text-decoration: underline;
        }
    </style>
    <script src="cgi-test.js"></script>
</head>
<body>
    <div class="container">
        <h1>Webserv ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸</h1>

        <div style="text-align: center; margin: 30px 0;">
            <img src="/images/broccoli.jpg" alt="Broccoli Image" style="max-width: 50%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);">
        </div>

        <div class="tab-navigation">
            <button class="tab-button active" onclick="openTab('home')">ãƒ›ãƒ¼ãƒ </button>
            <button class="tab-button" onclick="openTab('get')">GET</button>
            <button class="tab-button" onclick="openTab('head')">HEAD</button>
            <button class="tab-button" onclick="openTab('post')">POST</button>
            <button class="tab-button" onclick="openTab('delete')">DELETE</button>
            <button class="tab-button" onclick="openTab('cgi')">CGI</button>
        </div>

        <div id="home" class="tab-content active">
            
            <div class="success-message">
                http://localhost:8080<br>
                ã‚µãƒ¼ãƒãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ï¼
            </div>
            
            <div class="info-box">
                ã“ã®ãƒšãƒ¼ã‚¸ã¯Webservãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‹•ä½œç¢ºèªç”¨ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§ã™ã€‚
                ã“ã®ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°ã€HTTPã‚µãƒ¼ãƒãƒ¼ãŒæ­£å¸¸ã«HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ä¿¡ã§ãã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
            </div>
            
            <h2>ã‚µãƒ¼ãƒãƒ¼æƒ…å ±</h2>
            <ul>
                <li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: Webserv</li>
                <li>è¨€èª: C++ 98</li>
                <li>ãƒ—ãƒ­ãƒˆã‚³ãƒ«: HTTP/1.1</li>
            </ul>
            
            <h2>Webservã®ä¸»ãªæ©Ÿèƒ½</h2>
            <ul>
                <li>è¤‡æ•°ãƒãƒ¼ãƒˆã§ã®ãƒªãƒƒã‚¹ãƒ³</li>
                <li>GET, HEAD(option), POST, DELETEãƒ¡ã‚½ãƒƒãƒ‰ã®å¯¾å¿œ</li>
                <li>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</li>
                <li>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°</li>
                <li>CGIã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡ŒGET, POST</li>
                <li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</li>
            </ul>
        </div>

        <div id="get" class="tab-content">
            <h2>GETãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-links">
                <div style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="window.location.href='/index.html'" style="background-color: #28a745; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“„ index.html ãƒšãƒ¼ã‚¸
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /index.html
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="window.location.href='/autoindex/'" style="background-color: #17a2b8; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /autoindex/
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="window.location.href='/404test'" style="background-color: #dc3545; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            âŒ 404ã‚¨ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /404test
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="window.location.href='/408teapot'" style="background-color: #6f42c1; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ«– teapot
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /408teapot
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="window.location.href='http://localhost:5000'" style="background-color: #fd7e14; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸŒ localhost:5000
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET http://localhost:5000
                        </code>
                    </div>
                </div>
                <p style="color: #666; font-size: 14px; margin-top: 15px;">
                    ğŸ’¡ å„ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨åŒã˜ã‚¿ãƒ–ã§GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™
                </p>
            </div>
        </div>

        <div id="head" class="tab-content">
            <h2>HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-links">
                <p>HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯GETã¨åŒã˜ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿”ã—ã¾ã™ãŒã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã¯è¿”ã—ã¾ã›ã‚“ã€‚</p>
                <div style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="performHeadRequest('/')" style="background-color: #6f42c1; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“„ / (index.html)
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            HEAD /
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="performHeadRequest('/autoindex/')" style="background-color: #17a2b8; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“ /autoindex/ (allow)
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            HEAD /autoindex/
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="performHeadRequest('/uploads/')" style="background-color: #ffc107; color: #212529; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“‚ /uploads/ (not allow)
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            HEAD /uploads/
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="performHeadRequest('/404test')" style="background-color: #dc3545; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            âŒ /404test (å­˜åœ¨ã—ãªã„)
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            HEAD /404test
                        </code>
                    </div>
                </div>
                <div id="headResponse" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; margin-top: 15px; font-family: monospace; white-space: pre-wrap; display: none; backdrop-filter: blur(10px);">
                    <h5 style="margin-top: 0; color: #4a7c4a;">HEADãƒ¬ã‚¹ãƒãƒ³ã‚¹çµæœ:</h5>
                    <div id="headResponseContent"></div>
                </div>
                <p style="color: #666; font-size: 14px; margin-top: 15px;">
                    ğŸ’¡ å„ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ã‚’è¡¨ç¤ºã—ã¾ã™
                </p>
            </div>
        </div>

        <div id="post" class="tab-content">
            <h2>POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆï¼ˆã‚µãƒ¼ãƒãƒ¼ç›´æ¥ï¼‰</h2>
            <div class="test-links">
                <p>Webã‚µãƒ¼ãƒãƒ¼ã®å†…è”µæ©Ÿèƒ½ã«ã‚ˆã‚‹ç›´æ¥çš„ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨ãƒ‡ãƒ¼ã‚¿é€ä¿¡ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p>
                
                <h3>ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
                <div style="display: flex; align-items: flex-start; gap: 15px; flex-wrap: wrap; margin: 20px 0;">
                    <form id="fileUploadForm" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; backdrop-filter: blur(10px); flex: 1; min-width: 300px;">
                        <div style="margin-bottom: 10px;">
                            <label for="file">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ:</label>
                            <input type="file" id="file" name="uploadFile" accept="*/*" style="margin-left: 10px; border: 1px solid #ccc; padding: 4px 8px; border-radius: 3px;">
                        </div>
                        <button type="button" onclick="performFileUpload()" style="background-color: #28a745; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; width: 220px;">
                            ğŸ“¤ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
                        </button>
                    </form>
                    <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px); align-self: flex-start;">
                        POST /uploads<br>
                        Content-Type: multipart/form-data
                    </code>
                </div>

                <h3>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡</h3>
                <div style="display: flex; align-items: flex-start; gap: 15px; flex-wrap: wrap; margin: 20px 0;">
                    <form id="messageForm" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; backdrop-filter: blur(10px); flex: 1; min-width: 300px;">
                        <div style="margin-bottom: 10px;">
                            <label for="username">ãƒ¦ãƒ¼ã‚¶ãƒ¼å:</label>
                            <input type="text" id="username" name="username" style="margin-left: 10px; width: 150px; border: 1px solid #ccc; padding: 4px 8px; border-radius: 3px;">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label for="message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</label>
                            <textarea id="message" name="message" rows="3" cols="30" style="margin-left: 10px; border: 1px solid #ccc; padding: 4px 8px; border-radius: 3px;"></textarea>
                        </div>
                        <button type="button" onclick="performMessageSubmit()" style="background-color: #007bff; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; width: 220px;">
                            ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
                        </button>
                    </form>
                    <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px); align-self: flex-start;">
                        POST /uploads<br>
                        Content-Type: application/x-www-form-urlencoded
                    </code>
                </div>

                <div id="postResponse" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; margin-top: 15px; font-family: monospace; white-space: pre-wrap; display: none; backdrop-filter: blur(10px);">
                    <h5 style="margin-top: 0; color: #4a7c4a;">POSTãƒ¬ã‚¹ãƒãƒ³ã‚¹çµæœ:</h5>
                    <div id="postResponseContent"></div>
                </div>
                
                <p style="color: #666; font-size: 14px; margin-top: 15px;">
                    ğŸ’¡ ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½¿ã£ã¦POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã—ã¾ã™
                </p>
            </div>
        </div>

        <div id="delete" class="tab-content">
            <h2>DELETEãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-links">
                <h3>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§</h3>
                <div style="display: flex; align-items: flex-start; gap: 15px; flex-wrap: wrap; margin: 20px 0;">
                    <div id="fileList" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; backdrop-filter: blur(10px); flex: 1; min-width: 300px;">
                        <button onclick="loadFileList()" style="background-color: #17a2b8; color: white; padding: 6px 12px; border: none; border-radius: 3px; cursor: pointer; margin-bottom: 10px; width: 220px;">
                            ğŸ”„ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’æ›´æ–°
                        </button>
                        <div id="files">
                            <p style="color: #666; font-style: italic;">ã€Œãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’æ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤º</p>
                        </div>
                    </div>
                    <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px); align-self: flex-start;">
                        GET /uploads/8080/<br>
                        (ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—)
                    </code>
                </div>

                <h3>æ‰‹å‹•å‰Šé™¤ãƒ†ã‚¹ãƒˆ</h3>
                <div style="display: flex; align-items: flex-start; gap: 15px; flex-wrap: wrap; margin: 20px 0;">
                    <div style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; backdrop-filter: blur(10px); flex: 1; min-width: 300px;">
                        <div style="margin-bottom: 10px;">
                            <label for="manualDeletePath">ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹:</label>
                            <input type="text" id="manualDeletePath" placeholder="/uploads/8080/filename.txt" style="width: 100%; max-width: 250px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 3px; margin-top: 5px;">
                        </div>
                        <button onclick="deleteManualFile()" style="background-color: #dc3545; color: white; padding: 6px 12px; border: none; border-radius: 3px; cursor: pointer; width: 220px;">
                            ğŸ—‘ï¸ ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
                        </button>
                        <small style="display: block; color: #666; margin-top: 5px;">â€» ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦æ‰‹å‹•å‰Šé™¤</small>
                    </div>
                    <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px); align-self: flex-start;">
                        DELETE /uploads/8080/filename.txt<br>
                        (æŒ‡å®šãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤)
                    </code>
                </div>

                <p style="color: #666; font-size: 14px; margin-top: 15px;">
                    ğŸ’¡ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’DELETEãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å‰Šé™¤ã—ã¾ã™
                </p>
            </div>
        </div>

        <div id="cgi" class="tab-content">
            <h2>CGIã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-links">
                <p>CGIã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆscript.pyï¼‰ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆã§ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ã®ç›´æ¥å‡¦ç†ã§ã¯ãªãã€å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚‹å‹•çš„å‡¦ç†ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚</p>

                <h3>åŸºæœ¬çš„ãªCGIãƒ†ã‚¹ãƒˆ</h3>
                <div style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/script.py', 'GET')" style="background-color: #7dadd8; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ•’ ç¾åœ¨æ™‚åˆ»å–å¾—
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /script.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/env_test.py', 'GET')" style="background-color: #6c757d; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸŒ CGIç’°å¢ƒå¤‰æ•°
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /env_test.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/document.py', 'GET')" style="background-color: #17a2b8; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“„ HTMLãƒ¬ã‚¹ãƒãƒ³ã‚¹
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /document.py
                        </code>
                    </div>
                </div>

                <h3>ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ</h3>
                <div style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/client_redirect.py', 'GET')" style="background-color: #ffc107; color: #212529; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ”— å¤–éƒ¨ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /client_redirect.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/redirect_to_static.py', 'GET')" style="background-color: #ffc107; color: #212529; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“„ é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¸
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /redirect_to_static.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/redirect1.py', 'GET')" style="background-color: #ffc107; color: #212529; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ”„ ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒã‚§ãƒ¼ãƒ³
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /redirect1.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/loop1.py', 'GET')" style="background-color: #dc3545; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            âš ï¸ ç„¡é™ãƒ«ãƒ¼ãƒ—ãƒ†ã‚¹ãƒˆ
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /loop1.py
                        </code>
                    </div>
                </div>

                <h3>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</h3>
                <div style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testLargeOutput()" style="background-color: #20c997; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“Š å¤§å®¹é‡å‡ºåŠ› (64KB)
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /large_output_test.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiLargePost()" style="background-color: #20c997; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            ğŸ“¤ å¤§å®¹é‡POSTé€ä¿¡
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            POST /large_post_test.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiScript('/read_timeout_test.py', 'GET')" style="background-color: #6610f2; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            â±ï¸ èª­ã¿å–ã‚Šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            GET /read_timeout_test.py
                        </code>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <button onclick="testCgiWriteTimeout()" style="background-color: #6610f2; color: white; padding: 12px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; transition: background-color 0.3s ease; width: 220px;">
                            âœï¸ æ›¸ãè¾¼ã¿ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
                        </button>
                        <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px);">
                            POST /write_timeout_test.py
                        </code>
                    </div>
                </div>

                <div id="cgiTestResponse" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; margin-top: 20px; font-family: monospace; white-space: pre-wrap; display: none; backdrop-filter: blur(10px);">
                    <h5 style="margin-top: 0; color: #4a7c4a;">CGI ãƒ†ã‚¹ãƒˆçµæœ:</h5>
                    <div id="cgiTestContent"></div>
                </div>

                <h3>CGI POST - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
                <div style="display: flex; align-items: flex-start; gap: 15px; flex-wrap: wrap; margin: 20px 0;">
                    <form method="post" action="/uploads/script.py" enctype="multipart/form-data" style="background: rgba(255, 255, 255, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); padding: 15px; border-radius: 8px; backdrop-filter: blur(10px); flex: 1; min-width: 300px;">
                        <div style="margin-bottom: 10px;">
                            <label for="cgiFiles">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ:</label>
                            <input type="file" id="cgiFiles" name="files" multiple accept="*/*" style="margin-left: 10px; border: 1px solid #ccc; padding: 4px 8px; border-radius: 3px;">
                        </div>
                        <div style="margin-bottom: 10px;">
                            <label for="cgiFilename">ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«å:</label>
                            <input type="text" id="cgiFilename" placeholder="ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚¡ã‚¤ãƒ«å (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)" style="margin-left: 10px; width: 200px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 3px;">
                            <small style="display: block; color: #666; margin-top: 5px; margin-left: 100px;">â€» ç©ºã®å ´åˆã¯å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä½¿ç”¨</small>
                        </div>
                        <button type="button" onclick="performCgiPostRequest()" style="background-color: #28a745; color: white; padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; width: 220px;">
                            ğŸ“¤ CGIçµŒç”±ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
                        </button>
                    </form>
                    <code style="background: rgba(255, 255, 255, 0.3); padding: 8px 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #2d5a2d; border: 1px solid rgba(105, 190, 105, 0.3); backdrop-filter: blur(5px); align-self: flex-start;">
                        POST /uploads/script.py<br>
                        Content-Type: multipart/form-data
                    </code>
                </div>
                
                <p style="color: #666; font-size: 14px; margin-top: 15px;">
                    ğŸ’¡ CGIã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦å¤–éƒ¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨é€£æºã—ãŸãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™
                </p>
            </div>
        </div>

        <script>
            function openTab(tabName) {
                const contents = document.querySelectorAll('.tab-content');
                const buttons = document.querySelectorAll('.tab-button');
                
                contents.forEach(content => {
                    content.classList.remove('active');
                });
                
                buttons.forEach(button => {
                    button.classList.remove('active');
                });
                
                document.getElementById(tabName).classList.add('active');
                event.target.classList.add('active');
            }

            // Rest of the existing JavaScript code
            // Auto-load file list when page loads
            document.addEventListener('DOMContentLoaded', function() {
                loadFileList();
            });

            // HEAD request function (for preset URLs)
            function performHeadRequest(url) {
                if (!url) {
                    const urlSelect = document.getElementById('headUrl');
                    url = urlSelect ? urlSelect.value : '/';
                }
                executeHeadRequest(url);
            }

            // HEAD request function (for custom URLs)
            function performCustomHeadRequest() {
                const url = document.getElementById('customHeadUrl').value.trim();
                if (!url) {
                    alert('URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
                executeHeadRequest(url);
            }

            // Execute HEAD request and display response
            function executeHeadRequest(url) {
                const responseDiv = document.getElementById('headResponse');
                const contentDiv = document.getElementById('headResponseContent');
                
                // Show response display area
                responseDiv.style.display = 'block';
                contentDiv.innerHTML = 'HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ä¸­...\nURL: ' + url;

                const startTime = Date.now();
                
                fetch(url, {
                    method: 'HEAD'
                })
                .then(response => {
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    // Build response info
                    let responseInfo = '';
                    responseInfo += '=== HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆçµæœ ===\n';
                    responseInfo += 'URL: ' + url + '\n';
                    responseInfo += 'ãƒ¡ã‚½ãƒƒãƒ‰: HEAD\n';
                    responseInfo += 'ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: ' + responseTime + 'ms\n\n';
                    
                    // Status info
                    responseInfo += '=== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ===\n';
                    responseInfo += 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰: ' + response.status + '\n';
                    responseInfo += 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆ: ' + response.statusText + '\n';
                    responseInfo += 'OK: ' + response.ok + '\n\n';
                    
                    // Header info
                    responseInfo += '=== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ ===\n';
                    const headers = [];
                    for (let [key, value] of response.headers.entries()) {
                        headers.push(key + ': ' + value);
                    }
                    
                    if (headers.length > 0) {
                        headers.sort(); // Sort headers alphabetically
                        responseInfo += headers.join('\n');
                    } else {
                        responseInfo += '(ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“)';
                    }
                    contentDiv.innerHTML = responseInfo;
                })
                .catch(error => {
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    let errorInfo = '';
                    errorInfo += '=== HEADãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ ===\n';
                    errorInfo += 'URL: ' + url + '\n';
                    errorInfo += 'ãƒ¡ã‚½ãƒƒãƒ‰: HEAD\n';
                    errorInfo += 'ã‚¨ãƒ©ãƒ¼æ™‚é–“: ' + responseTime + 'ms\n\n';
                    errorInfo += 'ã‚¨ãƒ©ãƒ¼å†…å®¹: ' + error.message + '\n\n';
                    errorInfo += 'è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :\n';
                    errorInfo += '- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚¨ãƒ©ãƒ¼\n';
                    errorInfo += '- ã‚µãƒ¼ãƒãƒ¼ãŒå¿œç­”ã—ãªã„\n';
                    errorInfo += '- CORSãƒãƒªã‚·ãƒ¼é•å\n';
                    errorInfo += '- URLãŒå­˜åœ¨ã—ãªã„';
                    
                    contentDiv.innerHTML = errorInfo;
                    contentDiv.style.color = '#dc3545'; // Red color for errors
                });
            }

            function deleteFile(filepath) {
                if (confirm('æœ¬å½“ã«ãƒ•ã‚¡ã‚¤ãƒ« "' + filepath + '" ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                    fetch(filepath, {
                        method: 'DELETE'
                    })
                    .then(response => {
                        if (response.ok) {
                            alert('ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£å¸¸ã«å‰Šé™¤ã•ã‚Œã¾ã—ãŸ');
                            loadFileList(); // Update file list
                        } else {
                            alert('å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + response.status);
                        }
                    })
                    .catch(error => {
                        alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
                    });
                }
            }

            function loadFileList() {
                // Show loading message
                document.getElementById('files').innerHTML = '<p style="color: #666; font-style: italic;">èª­ã¿è¾¼ã¿ä¸­...</p>';
                
                fetch('/uploads/8080/', {
                    method: 'GET'
                })
                .then(response => {
                    if (response.ok) {
                        // Check if response is JSON
                        const contentType = response.headers.get('content-type');
                        if (contentType && contentType.includes('application/json')) {
                            return response.json();
                        } else {
                            // Parse HTML directory listing
                            return response.text().then(html => {
                                const parser = new DOMParser();
                                const doc = parser.parseFromString(html, 'text/html');
                                const links = doc.querySelectorAll('a');
                                const files = [];
                                links.forEach(link => {
                                    const href = link.getAttribute('href');
                                    // Skip parent directory, subdirectories, and hidden files
                                    if (href && href !== '../' && href !== '.' && href !== '..' && 
                                        !href.endsWith('/') && !href.startsWith('.')) {
                                        // Remove URL encoding if present
                                        const decodedHref = decodeURIComponent(href);
                                        // Also check decoded name for hidden files
                                        const filename = decodedHref.split('/').pop();
                                        if (!filename.startsWith('.')) {
                                            files.push('uploads/8080/' + filename);
                                        }
                                    }
                                });
                                return files;
                            });
                        }
                    }
                    throw new Error('ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ (Status: ' + response.status + ')');
                })
                .then(files => {
                    displayFileList(files);
                })
                .catch(error => {
                    document.getElementById('files').innerHTML = '<p style="color: #dc3545;">ã‚¨ãƒ©ãƒ¼: ' + error.message + '</p>';
                });
            }

            function displayFileList(files) {
                const filesDiv = document.getElementById('files');
                if (files.length === 0) {
                    filesDiv.innerHTML = '<p style="color: #666; font-style: italic;">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚ã‚Šã¾ã›ã‚“</p>';
                    return;
                }

                let html = '<table style="width: 100%; border-collapse: collapse;">';
                html += '<tr style="background-color: #f8f9fa; border-bottom: 1px solid #dee2e6;"><th style="padding: 8px; text-align: left;">ãƒ•ã‚¡ã‚¤ãƒ«å</th><th style="padding: 8px; text-align: center;">æ“ä½œ</th></tr>';
                
                files.forEach(file => {
                    const filepath = file;
                    const filename = file.split('/').pop(); // Extract only the filename
                    html += '<tr style="border-bottom: 1px solid #dee2e6;">';
                    html += '<td style="padding: 8px;"><a href="' + filepath + '" target="_blank" style="color: #007bff; text-decoration: none;">' + filename + '</a></td>';
                    html += '<td style="padding: 8px; text-align: center;"><button onclick="deleteFile(\'' + filepath + '\')" style="background-color: #dc3545; color: white; padding: 4px 8px; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;">å‰Šé™¤</button></td>';
                    html += '</tr>';
                });
                
                html += '</table>';
                filesDiv.innerHTML = html;
            }

            function deleteManualFile() {
                const filepath = document.getElementById('manualDeletePath').value.trim();
                if (!filepath) {
                    alert('ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
                deleteFile(filepath);
            }

            // File upload with fetch API
            async function performFileUpload() {
                const fileInput = document.getElementById('file');
                const responseDiv = document.getElementById('postResponse');
                const contentDiv = document.getElementById('postResponseContent');
                
                if (!fileInput.files.length) {
                    alert('ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                    return;
                }
                
                const file = fileInput.files[0];
                const formData = new FormData();
                formData.append('uploadFile', file);
                
                // Show response display area
                responseDiv.style.display = 'block';
                contentDiv.innerHTML = `ãƒ•ã‚¡ã‚¤ãƒ« "${file.name}" ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...`;
                contentDiv.style.color = '#4a7c4a';
                
                const startTime = Date.now();
                
                try {
                    const response = await fetch('/uploads', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    const responseText = await response.text();
                    
                    let responseInfo = '';
                    responseInfo += '=== POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆçµæœï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰ ===\n';
                    responseInfo += 'URL: /uploads\n';
                    responseInfo += 'ãƒ¡ã‚½ãƒƒãƒ‰: POST\n';
                    responseInfo += 'Content-Type: multipart/form-data\n';
                    responseInfo += 'ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: ' + responseTime + 'ms\n\n';
                    
                    // Upload info
                    responseInfo += '=== ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æƒ…å ± ===\n';
                    responseInfo += 'ãƒ•ã‚¡ã‚¤ãƒ«å: ' + file.name + '\n';
                    responseInfo += 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: ' + file.size + ' bytes\n';
                    responseInfo += 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—: ' + (file.type || 'unknown') + '\n\n';
                    
                    // Status info
                    responseInfo += '=== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ===\n';
                    responseInfo += 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰: ' + response.status + '\n';
                    responseInfo += 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆ: ' + response.statusText + '\n';
                    responseInfo += 'OK: ' + response.ok + '\n\n';
                    
                    if (response.ok) {
                        responseInfo += '=== ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ ===\n';
                        responseInfo += responseText + '\n\n';
                        contentDiv.style.color = '#4a7c4a';
                        // Clear file input on successful upload
                        fileInput.value = '';
                        // Update file list in DELETE tab
                        loadFileList();
                    } else {
                        responseInfo += '=== ã‚¨ãƒ©ãƒ¼å†…å®¹ ===\n';
                        responseInfo += responseText + '\n\n';
                        contentDiv.style.color = '#dc3545';
                    }
                    
                    // Header info
                    responseInfo += '=== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ ===\n';
                    const headers = [];
                    for (let [key, value] of response.headers.entries()) {
                        headers.push(key + ': ' + value);
                    }
                    
                    if (headers.length > 0) {
                        headers.sort();
                        responseInfo += headers.join('\n');
                    } else {
                        responseInfo += '(ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“)';
                    }
                    
                    contentDiv.innerHTML = responseInfo;
                } catch (error) {
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    let errorInfo = '';
                    errorInfo += '=== POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰ ===\n';
                    errorInfo += 'URL: /uploads\n';
                    errorInfo += 'ãƒ¡ã‚½ãƒƒãƒ‰: POST\n';
                    errorInfo += 'ã‚¨ãƒ©ãƒ¼æ™‚é–“: ' + responseTime + 'ms\n\n';
                    errorInfo += 'ã‚¨ãƒ©ãƒ¼å†…å®¹: ' + error.message + '\n\n';
                    errorInfo += 'è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :\n';
                    errorInfo += '- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚¨ãƒ©ãƒ¼\n';
                    errorInfo += '- ã‚µãƒ¼ãƒãƒ¼ãŒå¿œç­”ã—ãªã„\n';
                    errorInfo += '- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒä¸Šé™ã‚’è¶…ãˆã¦ã„ã‚‹\n';
                    errorInfo += '- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æ›¸ãè¾¼ã¿æ¨©é™ãŒãªã„';
                    
                    contentDiv.innerHTML = errorInfo;
                    contentDiv.style.color = '#dc3545';
                }
            }

            // Message submit with fetch API
            async function performMessageSubmit() {
                const username = document.getElementById('username').value.trim();
                const message = document.getElementById('message').value.trim();
                const responseDiv = document.getElementById('postResponse');
                const contentDiv = document.getElementById('postResponseContent');
                
                if (!username && !message) {
                    alert('ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
                
                const formData = new FormData();
                formData.append('username', username);
                formData.append('message', message);
                
                // Show response display area
                responseDiv.style.display = 'block';
                contentDiv.innerHTML = 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ä¸­...';
                contentDiv.style.color = '#4a7c4a';
                
                const startTime = Date.now();
                
                try {
                    const response = await fetch('/uploads', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    const responseText = await response.text();
                    
                    let responseInfo = '';
                    responseInfo += '=== POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆçµæœï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ï¼‰ ===\n';
                    responseInfo += 'URL: /uploads\n';
                    responseInfo += 'ãƒ¡ã‚½ãƒƒãƒ‰: POST\n';
                    responseInfo += 'Content-Type: application/x-www-form-urlencoded\n';
                    responseInfo += 'ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: ' + responseTime + 'ms\n\n';
                    
                    // Message info
                    responseInfo += '=== ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æƒ…å ± ===\n';
                    responseInfo += 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å: ' + (username || '(ç©º)') + '\n';
                    responseInfo += 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ' + (message || '(ç©º)') + '\n\n';
                    
                    // Status info
                    responseInfo += '=== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ===\n';
                    responseInfo += 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰: ' + response.status + '\n';
                    responseInfo += 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ†ã‚­ã‚¹ãƒˆ: ' + response.statusText + '\n';
                    responseInfo += 'OK: ' + response.ok + '\n\n';
                    
                    if (response.ok) {
                        responseInfo += '=== ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹ ===\n';
                        responseInfo += responseText + '\n\n';
                        contentDiv.style.color = '#4a7c4a';
                        // Clear form on successful submit
                        document.getElementById('username').value = '';
                        document.getElementById('message').value = '';
                    } else {
                        responseInfo += '=== ã‚¨ãƒ©ãƒ¼å†…å®¹ ===\n';
                        responseInfo += responseText + '\n\n';
                        contentDiv.style.color = '#dc3545';
                    }
                    
                    // Header info
                    responseInfo += '=== ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ ===\n';
                    const headers = [];
                    for (let [key, value] of response.headers.entries()) {
                        headers.push(key + ': ' + value);
                    }
                    
                    if (headers.length > 0) {
                        headers.sort();
                        responseInfo += headers.join('\n');
                    } else {
                        responseInfo += '(ãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“)';
                    }
                    
                    contentDiv.innerHTML = responseInfo;
                } catch (error) {
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    let errorInfo = '';
                    errorInfo += '=== POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ï¼‰ ===\n';
                    errorInfo += 'URL: /uploads\n';
                    errorInfo += 'ãƒ¡ã‚½ãƒƒãƒ‰: POST\n';
                    errorInfo += 'ã‚¨ãƒ©ãƒ¼æ™‚é–“: ' + responseTime + 'ms\n\n';
                    errorInfo += 'ã‚¨ãƒ©ãƒ¼å†…å®¹: ' + error.message + '\n\n';
                    errorInfo += 'è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :\n';
                    errorInfo += '- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚¨ãƒ©ãƒ¼\n';
                    errorInfo += '- ã‚µãƒ¼ãƒãƒ¼ãŒå¿œç­”ã—ãªã„\n';
                    errorInfo += '- ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒæ­£ã—ããªã„\n';
                    errorInfo += '- ã‚µãƒ¼ãƒãƒ¼ã®å‡¦ç†ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ';
                    
                    contentDiv.innerHTML = errorInfo;
                    contentDiv.style.color = '#dc3545';
                }
            }
        </script>
        <footer>
            &copy; 2025 Webserv Project
        </footer>
    </div>
</body>
</html>